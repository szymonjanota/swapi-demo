{"version":3,"sources":["components/Button.tsx","components/SearchForm.tsx","components/Title.tsx","components/Layout.tsx","types/ApiResponse.ts","types/Character.ts","types/ApiRoot.ts","utils/castDataToSchema.ts","hooks/useApiRoot.ts","hooks/useCharacters.ts","hooks/useInfiniteResource.ts","types/Planet.ts","utils/resources.ts","hooks/useResource.ts","types/Film.ts","components/DescriptionList/DescriptionList.tsx","components/DescriptionList/FieldTitle.tsx","components/DescriptionList/FieldValue.tsx","views/FilmView.tsx","hooks/useFilm.ts","views/CharacterView.tsx","hooks/usePlanet.ts","components/CharactersList.tsx","views/Characters.tsx","Providers.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["Button","styled","MuiButton","StyledPaper","Paper","StyledInputBase","InputBase","StyledSearchForm","className","value","onSubmit","onChange","component","e","preventDefault","placeholder","target","type","Title","Typography","Layout","children","Container","maxWidth","getApiResponseForType","t","count","next","previous","results","CharactersResponse","name","homeworld","url","films","ApiRoot","people","planets","castDataToType","data","validation","decode","console","warn","left","invariant","_tag","right","apiRootQueryConfig","queryKey","queryFn","a","fetch","process","response","json","config","staleTime","Infinity","cacheTime","useApiRoot","useQuery","useCharacters","options","queryParams","apiRoot","useInfiniteQuery","key","params","URL","search","searchParams","set","toString","enabled","Boolean","getFetchMore","lastPage","Planet","population","getResourceUrl","baseUrl","urlOrId","split","filter","part","length","fetchResource","resourceUrl","useResource","resource","Film","title","release_date","opening_crawl","DescriptionList","dl","FieldTitle","dt","FieldValue","dd","FilmView","useFilm","film","useMemo","releaseDate","openingCrawl","ellipsize","CharacterView","homeworldUrl","usePlanet","map","CharactersList","charactersQuery","status","canFetchMore","fetchMore","allCharacters","flatMap","page","log","Box","person","onClick","SearchFormContainer","div","StyledSubtitle","Characters","useState","text","setText","setSearch","variant","GlobalStyle","createGlobalStyle","Providers","queryCache","QueryCache","useEffect","prefetchQuery","muiTheme","theme","createMuiTheme","typography","fontFamily","palette","primary","yellow","responsiveFontSizes","StylesProvider","injectFirst","CssBaseline","ThemeProvider","App","initialIsOpen","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.6d6fc29a.chunk.js","sourcesContent":["import styled from \"styled-components\";\nimport { Button as MuiButton } from \"@material-ui/core\";\n\n\nexport const Button = styled(MuiButton)`\n  border-radius: 0;\n  background-color: yellow;\n  box-shadow: none;\n  padding: 7px 14px;\n  &:hover {\n    background-color: #cccc00;\n  }\n`","import React from 'react'\nimport { InputBase, Paper } from '@material-ui/core'\nimport styled from 'styled-components'\nimport { Button } from './Button'\n\nconst StyledPaper = styled(Paper)`\n  border-radius: 0;\n  display: flex;\n  background-color: black;\n  border: 2px solid yellow;\n`\n\nconst StyledInputBase = styled(InputBase)`\n  flex: 1;\n  color: yellow;\n  padding: 0 10px;\n`\n\nexport type SearchFormProps = {\n  className?: string\n  value: string\n  onChange: (value: string) => void\n  onSubmit: (value: string) => void\n}\n\nexport const SearchForm: React.FC<SearchFormProps> = ({\n  className,\n  value,\n  onSubmit,\n  onChange,\n}) => (\n  <StyledPaper\n    component=\"form\"\n    className={className}\n    onSubmit={(e) => {\n      e.preventDefault()\n      onSubmit(value)\n    }}\n  >\n    <StyledInputBase\n      placeholder=\"Search in the galaxy...\"\n      value={value}\n      onChange={(e) => onChange(e.target.value)}\n    />\n    <Button type=\"submit\">Search</Button>\n  </StyledPaper>\n)\n\nexport const StyledSearchForm = styled(SearchForm)``\n","import styled from 'styled-components'\nimport { Typography } from '@material-ui/core'\n\nexport const Title = styled(Typography)`\n  font-family: 'Changa One', cursive;\n  text-transform: uppercase;\n  text-align: center;\n`\n","import React from 'react'\nimport { Container } from '@material-ui/core'\n\nexport const Layout: React.FC = ({ children }) => {\n  return <Container maxWidth=\"sm\">{children as any}</Container>\n}\n","import * as t from 'io-ts'\n\nexport const getApiResponseForType = <A>(type: t.Type<A>) =>\n  t.type({\n    count: t.number,\n    next: t.union([t.string, t.null]),\n    previous: t.union([t.string, t.null]),\n    results: t.array(type),\n  })\n","import * as t from 'io-ts'\nimport { getApiResponseForType } from './ApiResponse'\n\nexport const Character = t.type({\n  name: t.string,\n  homeworld: t.string,\n  url: t.string,\n  films: t.array(t.string),\n})\nexport type Character = t.TypeOf<typeof Character>\n\nexport const CharactersResponse = getApiResponseForType(Character)\nexport type CharactersResponse = t.TypeOf<typeof CharactersResponse>\n","import * as t from 'io-ts'\n\nexport const ApiRoot = t.type({\n  people: t.string,\n  planets: t.string,\n  films: t.string,\n})\nexport type ApiRoot = t.TypeOf<typeof ApiRoot>\n","import * as t from 'io-ts'\nimport invariant from 'tiny-invariant'\n\nexport const castDataToType = <A, O = A, I = unknown>(\n  data: I,\n  type: t.Type<A, O, I>\n): A => {\n  const validation = type.decode(data)\n  if ('left' in validation) {\n    console.warn(data, validation.left)\n  }\n  invariant(validation._tag === 'Right', `Data could not be parsed to schema`)\n\n  return validation.right\n}\n","import { useQuery } from 'react-query'\n\nimport { ApiRoot } from 'types/ApiRoot'\nimport { castDataToType } from 'utils/castDataToSchema'\n\nexport const apiRootQueryConfig = {\n  queryKey: 'api-root',\n  queryFn: async () => {\n    const response = await fetch(\n      typeof process.env.REACT_APP_API_BASE_URL === 'string'\n        ? process.env.REACT_APP_API_BASE_URL\n        : 'https://swapi.dev/api/'\n    )\n    return castDataToType(await response.json(), ApiRoot)\n  },\n  config: {\n    staleTime: Infinity,\n    cacheTime: Infinity,\n  },\n}\n\nexport const useApiRoot = () => {\n  return useQuery<ApiRoot>(apiRootQueryConfig)\n}\n","import { CharactersResponse } from 'types/Character'\n\nimport { useApiRoot } from './useApiRoot'\nimport { useInfiniteResource } from './useInfiniteResource'\n\nexport const useCharacters = (options?: { search?: string; page?: number }) => {\n  const { data: apiRoot } = useApiRoot()\n  return useInfiniteResource(CharactersResponse, apiRoot?.people, options)\n}\n","\nimport { useInfiniteQuery } from \"react-query\"\nimport { Type } from \"io-ts\"\nimport invariant from \"tiny-invariant\"\n\nimport { castDataToType } from \"utils/castDataToSchema\"\n\nexport const useInfiniteResource = <T extends { next: string | null, previous: string | null }>(\n    type: Type<T>,\n    url?: string,\n    queryParams?: {\n      page?: number\n      search?: string,\n    }\n  ) => {\n    const result = useInfiniteQuery(\n      [url, queryParams],\n      async (\n        key?: string,\n        params?: {\n          search?: string\n          // page?: number\n        },\n        next: string | null = null\n      ) => {\n        invariant(key, 'url is required')\n  \n        const url = new URL(next || key)\n  \n        if (params?.search) {\n          url.searchParams.set('search', params.search)\n        }\n        // if (params?.page && params?.page > 1) {\n        //   url.searchParams.set('page', params.page.toString())\n        // }\n  \n        const response = await fetch(url.toString())\n        const data = await response.json()\n  \n        return castDataToType(data, type)\n      },\n      {\n        enabled: Boolean(url),\n        getFetchMore: lastPage => lastPage.next\n      }\n    )\n    return result\n  }","import * as t from 'io-ts'\nimport { getApiResponseForType } from './ApiResponse'\n\nexport const Planet = t.type({\n  url: t.string,\n  name: t.string,\n  population: t.string,\n})\nexport type Planet = t.TypeOf<typeof Planet>\n\nexport const PlanetsResponse = getApiResponseForType(Planet)\nexport type PlanetsResponse = t.TypeOf<typeof PlanetsResponse>\n","export const getResourceId = (url: string) => {\n  const urlParts = url.split('/').filter((part) => part !== '')\n  return urlParts[urlParts.length - 1]\n}\n\nexport const getResourceUrl = (baseUrl: string, urlOrId: string) => {\n  const urlParts = urlOrId.split('/').filter((part) => part !== '')\n  if (urlParts.length === 1) {\n    return `${baseUrl}${urlOrId}`\n  }\n  return urlOrId\n}\n","import { useQuery } from 'react-query'\nimport { Type } from 'io-ts'\nimport { castDataToType } from 'utils/castDataToSchema'\nimport invariant from 'tiny-invariant'\nimport { getResourceUrl } from 'utils/resources'\n\nconst fetchResource = async (\n  resourceUrl: string,\n  urlOrId: string\n): Promise<unknown> => {\n  const response = await fetch(getResourceUrl(resourceUrl, urlOrId))\n  return response.json()\n}\n\nexport const useResource = <T>(resource: {\n  type: Type<T>\n  baseUrl?: string\n  urlOrId?: string\n}) => {\n  const result = useQuery(\n    [resource.baseUrl, resource.urlOrId],\n    async (resourceUrl: unknown, urlOrId: unknown) => {\n      invariant(typeof resourceUrl === 'string', 'resourceUrl is required')\n      invariant(typeof urlOrId === 'string', 'urlOrId is required')\n\n      return castDataToType(await fetchResource(resourceUrl, urlOrId), resource.type)\n    },\n    {\n      enabled: Boolean(resource.baseUrl && resource.urlOrId),\n    }\n  )\n  return result\n}\n","import * as t from 'io-ts'\nimport { getApiResponseForType } from './ApiResponse'\n\nexport const Film = t.type({\n  url: t.string,\n  title: t.string,\n  release_date: t.string,\n  opening_crawl: t.string,\n})\nexport type Film = t.TypeOf<typeof Film>\n\nexport const FilmsResponse = getApiResponseForType(Film)\nexport type FilmsResponse = t.TypeOf<typeof FilmsResponse>\n","import styled from 'styled-components'\n\nexport const DescriptionList = styled.dl`\n  display: grid;\n  grid-template-columns: auto 1fr;\n  margin: 0;\n  padding: 8px 0;\n  \n  :hover {\n    outline: 1px dashed yellow;\n  }\n`\n","import styled from 'styled-components'\n\nexport const FieldTitle = styled.dt`\n  background-color: yellow;\n  border: 1px solid black;\n  color: black;\n  padding: 8px;\n`\n","import styled from \"styled-components\";\n\nexport const FieldValue = styled.dd`\n  border: 1px solid yellow;\n  padding: 8px;\n  margin: 0;\n`\n","import React, { useMemo } from 'react'\nimport ellipsize from 'ellipsize'\n\nimport { useFilm } from 'hooks/useFilm'\n\nimport {\n  DescriptionList,\n  FieldTitle,\n  FieldValue,\n} from 'components/DescriptionList'\nimport { Typography } from '@material-ui/core'\n\nexport const FilmView: React.FC<{\n  url: string\n}> = ({ url }) => {\n  const { data } = useFilm(url)\n\n  const film = useMemo(\n    () =>\n      data\n        ? {\n            title: data.title,\n            releaseDate: data.release_date,\n            openingCrawl: ellipsize(data.opening_crawl, 130),\n          }\n        : null,\n    [data]\n  )\n\n  return (\n    film && (\n      <>\n        <DescriptionList>\n          <FieldTitle>\n            <Typography>Title</Typography>\n          </FieldTitle>\n          <FieldValue>\n            <Typography>{film.title}</Typography>\n          </FieldValue>\n          \n          <FieldTitle>\n            <Typography>Release Date</Typography>\n          </FieldTitle>\n          <FieldValue>\n            <Typography>{film.releaseDate}</Typography>\n          </FieldValue>\n\n          <FieldTitle>\n            <Typography>Opening Crawl</Typography>\n          </FieldTitle>\n          <FieldValue>\n            <Typography>{film.openingCrawl}</Typography>\n          </FieldValue>\n        </DescriptionList>\n      </>\n    )\n  )\n}\n","import { Film } from 'types/Film'\n\nimport { useApiRoot } from './useApiRoot'\nimport { useResource } from './useResource'\n\nexport const useFilm = (urlOrId: string) => {\n  const { data: apiRoot } = useApiRoot()\n  return useResource({\n    type: Film,\n    baseUrl: apiRoot?.films,\n    urlOrId,\n  })\n}\n","import React from 'react'\n\nimport { usePlanet } from 'hooks/usePlanet'\n\nimport { FilmView } from './FilmView'\nimport { Typography } from '@material-ui/core'\nimport {\n  DescriptionList,\n  FieldTitle,\n  FieldValue,\n} from 'components/DescriptionList'\n\nexport type CharacterViewProps = {\n  name: string\n  homeworldUrl: string\n  films: string[]\n}\n\nexport const CharacterView: React.FC<CharacterViewProps> = ({\n  name,\n  homeworldUrl,\n  films,\n}) => {\n  const { data: homeworld } = usePlanet(homeworldUrl)\n\n  return (\n    <>\n      <div>\n        <DescriptionList>\n          <FieldTitle>\n            <Typography>Name</Typography>\n          </FieldTitle>\n          <FieldValue>\n            <Typography>{name}</Typography>\n          </FieldValue>\n\n          <FieldTitle>\n            <Typography>Homeworld</Typography>\n          </FieldTitle>\n          <FieldValue>\n            <Typography>{homeworld?.name}</Typography>\n          </FieldValue>\n\n          <FieldTitle>\n            <Typography>Homeworld Population</Typography>\n          </FieldTitle>\n          <FieldValue>\n            <Typography>{homeworld?.population}</Typography>\n          </FieldValue>\n        </DescriptionList>\n      </div>\n      <div>\n        {films.map((film) => (\n          <FilmView key={film} url={film} />\n        ))}\n      </div>\n    </>\n  )\n}\n","import { Planet } from 'types/Planet'\n\nimport { useApiRoot } from './useApiRoot'\nimport { useResource } from './useResource'\n\nexport const usePlanet = (urlOrId: string) => {\n  const { data: apiRoot } = useApiRoot()\n  return useResource({\n    type: Planet,\n    baseUrl: apiRoot?.planets,\n    urlOrId,\n  })\n}\n","import React, { useMemo } from 'react'\nimport { Box } from '@material-ui/core'\n\nimport { useCharacters } from 'hooks/useCharacters'\nimport { CharacterView } from 'views/CharacterView'\n\nimport { Button } from './Button'\n\nexport const CharactersList: React.FC<{ search?: string }> = ({ search }) => {\n  const charactersQuery = useCharacters({\n    search,\n  })\n  const {\n    status,\n    data,\n    canFetchMore,\n    fetchMore,\n  } = charactersQuery\n\n  const allCharacters = useMemo(\n    () => data?.flatMap((page) => page.results),\n    [data]\n  )\n\n  if (status === 'loading') return <p>Loading...</p>\n  if (status === 'error') return <p>Error :(</p>\n\n  console.log(canFetchMore)\n\n  return (\n    <Box>\n      {allCharacters?.map((person) => {\n        return (\n          <CharacterView\n            key={person.url}\n            name={person.name}\n            homeworldUrl={person.homeworld}\n            films={person.films}\n          />\n        )\n      })}\n      {canFetchMore && <Button onClick={() => fetchMore()}>Next</Button>}\n    </Box>\n  )\n}\n","import React, { useState } from 'react'\nimport styled from 'styled-components'\n\nimport { StyledSearchForm } from 'components/SearchForm'\nimport { Title } from 'components/Title'\nimport { Layout } from 'components/Layout'\nimport { CharactersList } from 'components/CharactersList'\n\nconst SearchFormContainer = styled.div`\n  display: flex;\n  justify-content: center;\n\n  ${StyledSearchForm} {\n    flex: 0 1 400px;\n  }\n`\n\nconst StyledSubtitle = styled(Title)`\n  border-top: 1px solid yellow;\n  margin-bottom: 48px;\n`\n\nexport const Characters = () => {\n  const [text, setText] = useState('')\n  const [search, setSearch] = useState('')\n\n  return (\n    <Layout>\n      <Title variant=\"h1\">STAR WARS</Title>\n      <StyledSubtitle variant=\"h2\">Characters</StyledSubtitle>\n\n      <SearchFormContainer>\n        <StyledSearchForm\n          value={text}\n          onChange={setText}\n          onSubmit={setSearch}\n        />\n      </SearchFormContainer>\n\n      {search && <CharactersList search={search} />}\n    </Layout>\n  )\n}\n","import React, { useMemo, useEffect } from 'react'\nimport { QueryCache, ReactQueryCacheProvider } from 'react-query'\nimport { BrowserRouter } from 'react-router-dom'\nimport { createGlobalStyle } from 'styled-components'\nimport {\n  createMuiTheme,\n  CssBaseline,\n  responsiveFontSizes,\n  StylesProvider,\n  ThemeProvider,\n} from '@material-ui/core'\nimport yellow from '@material-ui/core/colors/yellow'\n\nimport { apiRootQueryConfig } from 'hooks/useApiRoot'\n\nconst GlobalStyle = createGlobalStyle`\n  body {\n    background-color: black;\n    color: yellow;\n  }\n`\n\nexport const Providers: React.FC = ({ children }) => {\n  const queryCache = useMemo(() => new QueryCache(), [])\n\n  useEffect(() => {\n    queryCache.prefetchQuery(apiRootQueryConfig)\n  }, [queryCache])\n\n  const muiTheme = useMemo(() => {\n    const theme = createMuiTheme({\n      typography: {\n        fontFamily: 'Montserrat, sans-serif',\n      },\n      palette: {\n        primary: yellow,\n      },\n    })\n    return responsiveFontSizes(theme)\n  }, [])\n\n  console.log(muiTheme)\n\n  return (\n    <StylesProvider injectFirst>\n      <CssBaseline />\n      <ThemeProvider theme={muiTheme}>\n        <ReactQueryCacheProvider queryCache={queryCache}>\n          <GlobalStyle />\n          <BrowserRouter>{children}</BrowserRouter>\n        </ReactQueryCacheProvider>\n      </ThemeProvider>\n    </StylesProvider>\n  )\n}\n","import React from 'react'\nimport { ReactQueryDevtools } from 'react-query-devtools'\n\nimport { Characters } from 'views/Characters'\nimport { Providers } from 'Providers'\n\nfunction App() {\n  return (\n    <Providers>\n      <Characters />\n      <ReactQueryDevtools initialIsOpen />\n    </Providers>\n  )\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}